<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biznes Analitika Pro - Premium Moliya Tizimi</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #F8F9FC; }
        .glass { background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); }
        .ios-transition { transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
        .nav-card:active { transform: scale(0.92); }
        .gradient-text { background: linear-gradient(135deg, #007AFF 0%, #00C7BE 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        input[type="number"]::-webkit-inner-spin-button { display: none; }
    </style>
</head>
<body x-data="financeApp()" x-init="initCharts()">

    <header class="fixed top-0 w-full z-40 glass border-b border-gray-100 px-6 py-4 flex justify-between items-center">
        <div class="flex items-center gap-2">
            <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white font-black text-xl">B</div>
            <h1 class="text-xl font-extrabold tracking-tighter text-[#1C1C1E]">BIZNES<span class="text-blue-600">PRO</span></h1>
        </div>
        <div class="flex items-center gap-4">
            <span class="text-[10px] font-black uppercase tracking-widest text-blue-600 bg-blue-50 px-2 py-1 rounded">Analitika Faol</span>
        </div>
    </header>

    <main x-show="page === 'home'" x-transition:enter="ios-transition" x-transition:enter-start="opacity-0 scale-95" class="pt-24 pb-32 px-5 max-w-4xl mx-auto">
        
        <div class="mb-8">
            <h2 class="text-3xl font-extrabold text-[#1C1C1E]">Xush kelibsiz!</h2>
            <p class="text-gray-500 font-medium">Biznesingizning moliyaviy sog'lig'ini tekshiring.</p>
        </div>

        <div class="mb-8 rounded-[2rem] overflow-hidden shadow-xl shadow-blue-100 h-44 relative group cursor-pointer">
            <img :src="ads.image" class="w-full h-full object-cover transition duration-700 group-hover:scale-110">
            <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent p-6 flex flex-col justify-end">
                <span class="text-white/70 text-xs font-bold uppercase tracking-widest">Hamkorlik</span>
                <h3 class="text-white text-xl font-bold">Biznesingizni biz bilan o'stiring</h3>
            </div>
        </div>

        <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
            <template x-for="module in modules">
                <div @click="openModule(module)" class="nav-card bg-white p-6 rounded-[2.5rem] shadow-sm border border-gray-50 flex flex-col items-center justify-center cursor-pointer ios-transition hover:shadow-lg">
                    <div :class="module.color" class="w-16 h-16 rounded-3xl flex items-center justify-center text-3xl text-white mb-4 shadow-lg" x-text="module.icon"></div>
                    <span class="font-bold text-[#1C1C1E] text-center text-sm" x-text="module.name"></span>
                </div>
            </template>
        </div>

        <footer class="mt-20 border-t border-gray-100 pt-10 pb-10 text-center">
            <p class="text-gray-400 text-sm mb-4">Â© 2024 Biznes Analitika Tizimi</p>
            <div class="max-w-xs mx-auto">
                <input type="text" x-model="adminKey" @input="checkAdminKey" placeholder="Fikr-mulohaza qoldiring..." 
                       class="w-full bg-white border border-gray-200 rounded-full px-4 py-2 text-sm outline-none focus:ring-2 ring-blue-500 transition-all text-center">
            </div>
        </footer>
    </main>

    <template x-for="module in modules">
        <div x-show="page === module.id" class="fixed inset-0 z-50 bg-[#F8F9FC] overflow-y-auto">
            <nav class="glass sticky top-0 px-6 py-5 flex items-center justify-between z-10">
                <button @click="page = 'home'" class="flex items-center text-blue-600 font-bold">
                    <svg class="w-5 h-5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M15 19l-7-7 7-7"></path></svg>
                    Orqaga
                </button>
                <h2 class="font-black text-sm uppercase tracking-tighter" x-text="module.name"></h2>
            </nav>

            <div class="p-6 max-w-4xl mx-auto space-y-6">
                <div class="bg-white rounded-[3rem] p-8 shadow-sm border border-gray-50 grid md:grid-cols-2 gap-8">
                    <div class="space-y-6">
                        <h3 class="font-bold text-gray-400 text-xs uppercase">Ma'lumotlarni kiriting</h3>
                        <template x-for="(field, index) in module.fields">
                            <div class="space-y-2">
                                <label class="text-sm font-bold text-gray-700 ml-1" x-text="field.label"></label>
                                <input type="number" x-model="field.value" @input="updateModule(module.id)"
                                       class="w-full bg-gray-50 p-4 rounded-2xl text-xl font-black outline-none border-2 border-transparent focus:border-blue-500 transition-all">
                            </div>
                        </template>
                    </div>

                    <div class="flex flex-col justify-center items-center">
                        <canvas :id="'chart-' + module.id" class="max-h-[250px]"></canvas>
                        <div class="mt-6 text-center">
                            <span class="text-gray-400 text-xs font-bold uppercase tracking-widest" x-text="module.resultLabel"></span>
                            <div class="text-4xl font-black text-blue-600 mt-1" x-text="formatMoney(module.result)"></div>
                        </div>
                    </div>
                </div>

                <div class="bg-blue-600 rounded-[3rem] p-8 text-white shadow-xl shadow-blue-200 flex items-center gap-6">
                    <div class="text-4xl">ðŸ’¡</div>
                    <div>
                        <h4 class="font-bold text-lg">Moliyaviy Tavsiya</h4>
                        <p class="text-blue-100 text-sm opacity-90" x-text="module.insight"></p>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <div x-show="showAdmin" x-transition:enter="ios-transition" class="fixed inset-0 z-[100] bg-white overflow-y-auto">
        <nav class="p-6 border-b flex justify-between items-center sticky top-0 bg-white/90 backdrop-blur">
            <h2 class="text-2xl font-black">Admin <span class="text-blue-600">Boshqaruvi</span></h2>
            <button @click="showAdmin = false" class="bg-red-50 text-red-500 p-2 rounded-full px-4 font-bold text-sm">Chiqish</button>
        </nav>

        <div class="p-8 max-w-5xl mx-auto space-y-10">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="bg-gray-50 p-6 rounded-[2rem] border border-gray-100">
                    <p class="text-gray-400 font-bold text-xs uppercase">Onlayn foydalanuvchilar</p>
                    <h4 class="text-4xl font-black mt-2">24</h4>
                    <div class="mt-2 text-green-500 text-xs font-bold">â†‘ 12% bugun</div>
                </div>
                <div class="bg-gray-50 p-6 rounded-[2rem] border border-gray-100">
                    <p class="text-gray-400 font-bold text-xs uppercase">Reklama ko'rishlar</p>
                    <h4 class="text-4xl font-black mt-2" x-text="ads.views"></h4>
                </div>
                <div class="bg-gray-50 p-6 rounded-[2rem] border border-gray-100">
                    <p class="text-gray-400 font-bold text-xs uppercase">Reklama bosishlar</p>
                    <h4 class="text-4xl font-black mt-2" x-text="ads.clicks"></h4>
                </div>
            </div>

            <div class="bg-white border rounded-[3rem] p-8 space-y-6">
                <h3 class="text-xl font-bold">Reklamani yangilash</h3>
                <div class="space-y-4">
                    <label class="block text-sm font-bold text-gray-500 uppercase">Banner rasm URL (Video yoki Rasm)</label>
                    <div class="flex gap-4">
                        <input type="text" x-model="newAdUrl" class="flex-1 bg-gray-50 p-4 rounded-2xl outline-none focus:ring-2 ring-blue-500" placeholder="https://...">
                        <button @click="updateAd()" class="bg-blue-600 text-white px-8 rounded-2xl font-black hover:bg-blue-700 transition">Saqlash</button>
                    </div>
                </div>
                <div class="h-40 w-full rounded-3xl overflow-hidden bg-gray-100">
                    <img :src="ads.image" class="w-full h-full object-cover">
                </div>
            </div>
        </div>
    </div>

    <script>
        function financeApp() {
            return {
                page: 'home',
                showAdmin: false,
                adminKey: '',
                newAdUrl: '',
                ads: { image: 'https://images.unsplash.com/photo-1560472354-b33ff0c44a43?q=80&w=1251&auto=format&fit=crop', views: 1420, clicks: 89 },
                
                modules: [
                    { 
                        id: 'cashflow', name: 'Cash Flow (Pul Oqimi)', icon: 'ðŸŒŠ', color: 'bg-blue-500', 
                        resultLabel: 'Kassa qoldig\'i', result: 0, 
                        insight: 'Kassada pul borligi hali foyda bor degani emas. Operatsion oqimni kuzating.',
                        fields: [{label: 'Kirim (Tushum)', value: 0}, {label: 'Chiqim (Xarajat)', value: 0}]
                    },
                    { 
                        id: 'pnl', name: 'P&L (Foyda va Zarar)', icon: 'âš–ï¸', color: 'bg-emerald-500', 
                        resultLabel: 'Sof Foyda', result: 0, 
                        insight: 'Soliqlar va amortizatsiyadan keyingi haqiqiy foydangizni hisoblang.',
                        fields: [{label: 'Yalpi tushum', value: 0}, {label: 'O\'zgarmas xarajatlar', value: 0}]
                    },
                    { 
                        id: 'roi', name: 'ROI (Investitsiya)', icon: 'ðŸš€', color: 'bg-violet-600', 
                        resultLabel: 'Rentabellik', result: 0, 
                        insight: 'Kiritilgan har bir 1 so\'m qancha foyda keltirayotganini ko\'rsatadi.',
                        fields: [{label: 'Sarmoya miqdori', value: 0}, {label: 'Olingan daromad', value: 0}]
                    },
                    { 
                        id: 'tax', name: 'Soliq Diagnostikasi', icon: 'ðŸ¦', color: 'bg-orange-500', 
                        resultLabel: 'Soliq yuki', result: 0, 
                        insight: 'O\'zbekiston rezidentlari uchun aylanma solig\'i va QQS optimal hisobi.',
                        fields: [{label: 'Aylik tushum', value: 0}, {label: 'Soliq stavkasi (%)', value: 4}]
                    },
                    { 
                        id: 'margin', name: 'Tannarx va Marja', icon: 'ðŸ“Š', color: 'bg-rose-500', 
                        resultLabel: 'Dona foydasi', result: 0, 
                        insight: 'Marjangiz 20% dan past bo\'lsa, xarajatlarni qayta ko\'rib chiqing.',
                        fields: [{label: 'Sotish narxi', value: 0}, {label: 'Sotib olish/Tannarx', value: 0}]
                    },
                    { 
                        id: 'safety', name: 'Xavfsizlik Buferi', icon: 'ðŸ›¡ï¸', color: 'bg-indigo-600', 
                        resultLabel: 'Rezerv fondi', result: 0, 
                        insight: 'Inqiroz paytida biznesingiz 6 oy yashashi uchun kerakli summa.',
                        fields: [{label: 'Oylik xarajat', value: 0}, {label: 'Zaxira oylari soni', value: 6}]
                    }
                ],

                checkAdminKey() {
                    if (this.adminKey.toLowerCase() === 'admin paneli ochilsin!') {
                        this.showAdmin = true;
                        this.adminKey = '';
                    }
                },

                updateAd() {
                    if(this.newAdUrl) {
                        this.ads.image = this.newAdUrl;
                        this.newAdUrl = '';
                        alert('Reklama yangilandi!');
                    }
                },

                openModule(module) {
                    this.page = module.id;
                    this.$nextTick(() => this.updateChart(module.id));
                },

                updateModule(id) {
                    let m = this.modules.find(x => x.id === id);
                    let v1 = parseFloat(m.fields[0].value) || 0;
                    let v2 = parseFloat(m.fields[1].value) || 0;

                    if(id === 'cashflow' || id === 'pnl') m.result = v1 - v2;
                    if(id === 'roi') m.result = v1 > 0 ? (v2 / v1) * 100 : 0;
                    if(id === 'tax') m.result = (v1 * v2) / 100;
                    if(id === 'margin') m.result = v1 - v2;
                    if(id === 'safety') m.result = v1 * v2;

                    this.updateChart(id);
                },

                formatMoney(val) {
                    return new Intl.NumberFormat('uz-UZ').format(val) + (this.page === 'roi' ? ' %' : ' so\'m');
                },

                charts: {},
                initCharts() {},

                updateChart(id) {
                    const ctx = document.getElementById('chart-' + id);
                    if (!ctx) return;

                    let m = this.modules.find(x => x.id === id);
                    let v1 = parseFloat(m.fields[0].value) || 100;
                    let v2 = parseFloat(m.fields[1].value) || 50;

                    if (this.charts[id]) this.charts[id].destroy();

                    this.charts[id] = new Chart(ctx, {
                        type: id === 'roi' ? 'doughnut' : 'bar',
                        data: {
                            labels: [m.fields[0].label, m.fields[1].label],
                            datasets: [{
                                data: [v1, v2],
                                backgroundColor: ['#007AFF', '#E5E5EA'],
                                borderRadius: 12,
                                borderSkipped: false
                            }]
                        },
                        options: {
                            plugins: { legend: { display: false } },
                            scales: { 
                                y: { display: false },
                                x: { grid: { display: false } }
                            }
                        }
                    });
                }
            }
        }
    </script>
</body>
        </html>
        
